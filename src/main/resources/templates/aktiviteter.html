<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Aktiviteter</title>
    <script>
        // Function to fetch and populate instructors in the dropdown
        function fetchInstruktører() {
            fetch('/api/instruktører') // Assume you have an API endpoint for fetching instructors
                .then(response => response.json())
                .then(data => {
                    let instruktørSelect = document.getElementById('instruktørId');
                    data.forEach(instruktør => {
                        let option = document.createElement('option');
                        option.value = instruktør.id;
                        option.textContent = instruktør.navn;
                        instruktørSelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error fetching instructors:', error));
        }

        // Function to fetch and display all activities
        function fetchAktiviteter() {
            fetch('/api/aktiviteter') // Assume you have an API endpoint for fetching activities
                .then(response => response.json())
                .then(data => {
                    let aktivitetTableBody = document.getElementById('aktivitetTableBody');
                    aktivitetTableBody.innerHTML = ''; // Clear existing content
                    data.forEach(aktivitet => {
                        let row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${aktivitet.id}</td>
                            <td>${aktivitet.navn}</td>
                            <td>${aktivitet.instruktør ? aktivitet.instruktør.navn : 'No Instructor'}</td>
                            <td>
                                <a href="/aktiviteter/${aktivitet.id}">View</a>
                                <form action="/aktiviteter/${aktivitet.id}/delete" method="post" style="display:inline;">
                                    <button type="submit" onclick="return confirm('Er du sikker på, at du vil slette denne aktivitet?');">Slet</button>
                                </form>
                            </td>
                        `;
                        aktivitetTableBody.appendChild(row);
                    });
                })
                .catch(error => console.error('Error fetching activities:', error));
        }

        // Call the functions when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            fetchInstruktører();
            fetchAktiviteter();
        });
    </script>
</head>
<body>
<h1>Aktiviteter</h1>

<h2>Opret Ny Aktivitet</h2>
<form action="/aktiviteter" method="post">
    <label for="navn">Aktivitet Navn:</label>
    <input type="text" name="navn" id="navn" required>

    <label for="instruktørId">Instruktør:</label>
    <select name="instruktørId" id="instruktørId" required>
        <option value="">--Vælg Instruktør--</option>
    </select>

    <button type="submit">Opret</button>
</form>

<h2>Eksisterende Aktiviteter</h2>
<table>
    <tr>
        <th>ID</th>
        <th>Navn</th>
        <th>Instruktør Navn</th>
        <th>Handlinger</th>
    </tr>
    <tbody id="aktivitetTableBody"></tbody>
</table>

</body>
</html>
